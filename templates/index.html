{% extends "layout.html" %}

{% block title %}
    index
{% endblock %}

{% block main %}
<body>

  <div class="container">
    <h2>Featured Recipies</h2>
    <p>The .thumbnail class can be used to display an image gallery.</p>
    <p>The .caption class adds proper padding and a dark grey color to text inside thumbnails.</p>
    <p>Click on the images to enlarge them.</p>
    <div class="row">
      {% for i in range(3) %}
      <div class="col-md-4">
        <div class="thumbnail">
          <a href="{{results[i].recipe_image}}" target="_blank">
            <img src="{{results[i].recipe_image}}" alt="Lights" style="width:100%">
            <div class="caption">
              <p>{{results[i].recipe_name}}</p>
            </div>
          </a>
        </div>
        <div id = 'like'>
        <form action="">
          <button name="like" type="submit" value="{{results[i].recipe_id}}" >Like</button>
        </form> 
      </div>
      </div>
       {% endfor %}

       <script>
        $("button").click(function() {
          var fired_button = $(this).val();
          alert(fired_button);
          var xhttp;    
          xhttp = new XMLHttpRequest();
          xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              document.getElementById("like").innerHTML = this.responseText;
            }
          };
          xhttp.open("GET", "query.py?q="+fired_button, true);
          xhttp.send();
        }

      
          
        </script>


    </div>
    <div class="row">
      {% for i in range(3, 6) %}
      <div class="col-md-4">
        <div class="thumbnail">
          <a href="{{results[i].recipe_image}}" target="_blank">
            <img src="{{results[i].recipe_image}}" alt="Lights" style="width:100%">
            <div class="caption">
              <p>{{results[i].recipe_name}}</p>
            </div>
          </a>
        </div>
      </div>
       {% endfor %}
    </div>
    <div class="row">
      {% for i in range(6, 9) %}
      <div class="col-md-4">
        <div class="thumbnail">
          <a href="{{results[i].recipe_image}}" target="_blank">
            <img src="{{results[i].recipe_image}}" alt="Lights" style="width:100%">
            <div class="caption">
              <p>{{results[i].recipe_name}}</p>
            </div>
          </a>
        </div>
      </div>
       {% endfor %}
    </div>
  </div>
{% endblock %}